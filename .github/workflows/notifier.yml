name: Notify Telegram

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  Telegram_Notification:
    runs-on: ubuntu-latest
    steps:
      - name: Get timestamp
        id: get_time
        run: echo "TIME=$(TZ='Asia/Kolkata' date +'%-d-%m-%Y %I:%M %p')" >> $GITHUB_OUTPUT

      - name: Send Telegram Notification
        if: always()
        uses: appleboy/telegram-action@master

        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          format: markdown
          message: |
            ðŸš€ *New Commit Pushed by ${{ github.actor }}*

            ðŸ“¨ *Message:* ${{ github.event.head_commit.message }}

            ðŸ—‚ *Repository:* `${{ github.repository }}`

            ðŸŒµ *Branch:* `${{ github.ref_name }}`

            âœ… *Status:* ${{ job.status }}

            ðŸ“… *Timestamp:* ${{ steps.get_time.outputs.TIME }}

            ðŸ«† *Commit ID:* `${{ github.sha }}`
